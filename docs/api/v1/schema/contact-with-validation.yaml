# USER STORY: Holdings Contact Information Management
# Enhanced contact schema with UK telephone and email validation

title: ContactWithValidation
type: object
required:
  - type
  - value
properties:
  type:
    type: string
    enum: [telephone, email]
    description: Type of contact information
  value:
    type: string
    description: Contact value with appropriate validation based on type

# Enhanced validation for UK standards
oneOf:
  - # UK Telephone Number Validation
    properties:
      type:
        const: telephone
      value:
        type: string
        description: |
          UK telephone number supporting multiple formats:
          - UK landline: 01234 567890, (01234) 567890
          - UK mobile: 07123 456789, +44 7123 456789
          - International format: +44 1234 567890
        pattern: '^(\+44\s?|0)((1\d{8,9})|(2\d{7,8})|(3\d{8,9})|(7\d{8,9})|(8\d{8,9})|(9\d{8,9}))$|^(\+44\s?|0)(1\d{3}\s?\d{6}|2\d{2}\s?\d{7}|3\d{2}\s?\d{7}|7\d{3}\s?\d{6}|8\d{2}\s?\d{7}|9\d{2}\s?\d{7})$|^\(\+44\)?\s?(0?1\d{3})\s?\d{6}|\(\+44\)?\s?(0?2\d{2})\s?\d{7}|\(\+44\)?\s?(0?3\d{2})\s?\d{7}|\(\+44\)?\s?(0?7\d{3})\s?\d{6}|\(\+44\)?\s?(0?8\d{2})\s?\d{7}|\(\+44\)?\s?(0?9\d{2})\s?\d{7}$'
        examples:
          - "01234 567890"
          - "07123 456789"
          - "+44 1234 567890"
          - "+44 7123 456789"
          - "(01234) 567890"
    additionalProperties: false

  - # Email Validation
    properties:
      type:
        const: email
      value:
        type: string
        format: email
        description: |
          Valid email address following RFC 5322 standards.
          Must contain @ symbol and valid domain structure.
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        examples:
          - "farmer@example.com"
          - "contact@farm.co.uk"
          - "john.smith@meadowbrook-farm.org"
    additionalProperties: false

examples:
  uk-landline:
    type: telephone
    value: "01234 567890"
  
  uk-mobile:
    type: telephone
    value: "07123 456789"
  
  international-format:
    type: telephone
    value: "+44 1234 567890"
  
  email-contact:
    type: email
    value: "farmer@example.com"
