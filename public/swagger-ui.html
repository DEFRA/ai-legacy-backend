<!doctype html>
<html lang="en">
  <head>
    <title>TB Case Management System API Documentation</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui.css"
    />
    <style>
      html {
        box-sizing: border-box;
        overflow: -moz-scrollbars-vertical;
        overflow-y: scroll;
      }
      *,
      *:before,
      *:after {
        box-sizing: inherit;
      }
      body {
        margin: 0;
        background: #fafafa;
      }
    </style>
  </head>
  <body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-standalone-preset.js"></script>
    <script>
      window.onload = function () {
        // Fetch the OpenAPI spec
        fetch("./openapi.yaml")
          .then((response) => response.text())
          .then((yamlText) => {
            SwaggerUIBundle({
              spec: jsyaml.load(yamlText),
              dom_id: "#swagger-ui",
              deepLinking: true,
              presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIStandalonePreset,
              ],
              plugins: [SwaggerUIBundle.plugins.DownloadUrl],
              layout: "StandaloneLayout",
              tryItOutEnabled: true,
              requestInterceptor: (request) => {
                // Handle relative URLs by prefixing with API server
                if (request.url.startsWith("/")) {
                  request.url = "http://localhost:3002" + request.url;
                }
                return request;
              },
            });
          });
      };
    </script>
    <script src="https://unpkg.com/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  </body>
</html>
